<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.54.0 with theme Tranquilpeak 0.4.3-SNAPSHOT">
<meta name="author" content="Samuel Gonzalez">
<meta name="keywords" content=", R, R Ciencias Sociales, R Studio, Blog R, R Studio Ciencias Sociales, R Socioeconomía">
<meta name="description" content="IntroducciónHasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos.">


<meta property="og:description" content="IntroducciónHasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos.">
<meta property="og:type" content="article">
<meta property="og:title" content="Manipulación de datos">
<meta name="twitter:title" content="Manipulación de datos">
<meta property="og:url" content="/2019/01/manipulaci%C3%B3n-de-datos/">
<meta property="twitter:url" content="/2019/01/manipulaci%C3%B3n-de-datos/">
<meta property="og:site_name" content="Samuel Gnz">
<meta property="og:description" content="IntroducciónHasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos.">
<meta name="twitter:description" content="IntroducciónHasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos.">
<meta property="og:locale" content="es-es">

  
    <meta property="article:published_time" content="2019-01-10T00:00:00">
  
  
    <meta property="article:modified_time" content="2019-01-10T00:00:00">
  
  
  
    
      <meta property="article:section" content="Curso R">
    
  
  
    
      <meta property="article:tag" content="R">
    
      <meta property="article:tag" content="Ciencias Sociales">
    
      <meta property="article:tag" content="dplyr">
    
      <meta property="article:tag" content="Datos">
    
      <meta property="article:tag" content="PISAC">
    
      <meta property="article:tag" content="tidyverse">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="/img/me.jpg">
  <meta property="twitter:image" content="/img/me.jpg">


    <title>Manipulación de datos</title>

    <link rel="icon" href="/favicon.png">
    

    

    <link rel="canonical" href="/2019/01/manipulaci%C3%B3n-de-datos/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-nnm2spxvve8onlujjlegkkytaehyadd4ksxc1hyzzq9a2wvtrgbljqyulomn.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Samuel Gnz</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="/img/me.jpg" alt="Foto de autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="/img/me.jpg" alt="Foto de autor" />
        </a>
        <h4 class="sidebar-profile-name">Samuel Gonzalez</h4>
        
          <h5 class="sidebar-profile-bio">Técnico en Investigación Socioeconómica</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Inicio</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categorías</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Etiquetas</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archivos</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Acerca de</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Manipulación de datos
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-01-10T00:00:00Z">
        
  Enero 10, 2019

      </time>
    
    
  
  
    <span>en</span>
    
      <a class="category-link" href="/categories/curso-r">Curso R</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<div class="text-justify">
<h2 id="introduccion">Introducción</h2>
<p>Hasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos. Existe un paquete llamado <code>dplyr</code> el cual es muy útil y fue diseñado para manipular dataframes. Este paquete contiene una serie de funciones que nos permiten manipular los datos para el análisis de los mismos. A continuación se presenta una tabla que resume las funciones más utilizadas de este paquete.</p>
<p><em>Tabla 5</em></p>
<table>
<colgroup>
<col width="12%" />
<col width="87%" />
</colgroup>
<thead>
<tr class="header">
<th>Función</th>
<th>Ejemplo de sintaxis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>arrange()</td>
<td>arrange(variable1, variable2)</td>
</tr>
<tr class="even">
<td>left_join()</td>
<td>dataframe1 %&gt;% left_join(., dataframe2, by = “variable”)</td>
</tr>
<tr class="odd">
<td>filter()</td>
<td>filter(condición lógica según valor de variable). Ejemplo, filter(variable == “valor”)</td>
</tr>
<tr class="even">
<td>select()</td>
<td>select(variable1, variable2)</td>
</tr>
<tr class="odd">
<td>mutate()</td>
<td>mutate(variable_nueva = operación entre variables). Ejemplo: mutate(var_nueva = variable1/variable2)</td>
</tr>
<tr class="even">
<td>case_when</td>
<td>case_when(condicion1 ~ “Valor1”, condicion2 ~ “Valor2”, condicion3 ~ “Valor3”)</td>
</tr>
<tr class="odd">
<td>rename()</td>
<td>rename(nombre_nuevo = nombre_viejo)</td>
</tr>
<tr class="even">
<td>summarise()</td>
<td>summarise(nombre_col = medida(variable)</td>
</tr>
<tr class="odd">
<td>group_by()</td>
<td>group_by(variable1) %&gt;% summarise(nombre_col = medida(variable)</td>
</tr>
</tbody>
</table>
<p>Iremos viendo más adelante cada una de estas funciones.</p>
<h2 id="instalacion">Instalación</h2>
<p>Podemos instalar el paquete Tidyverse que contiene al paquete dplyr entre otros paquetes útiles para el analisis de datos o directamente instalar dplyr individualmente.</p>
<pre class="r"><code># Instalar tidyverse
install.packages(&quot;tidyverse&quot;)

# O sino instalar solo dplyr
install.packages(&quot;dplyr&quot;)</code></pre>
<h2 id="pipe">Pipe</h2>
<p>Este paquete está diseñado para que todas las funciones trabajen encadenadamente mediante la utilización del <strong>pipe</strong> (tubería), el cual se escribe con el caracter <code>%&gt;%</code> (se realiza combinando las teclas Ctrl + Shift + M o Cmd + Shift + M en Mac). La acción que realiza el pipe es llamar a un objeto que se encuentra a la izquierda y transformarlo mediante la función que se le indique a la derecha. El objeto que se indique a la izquierda no se verá afectado por cambios, a menos que se lo índique. Iremos viendo con más detalle en los ejemplos. Ahora vamos a ver ejemplos para cada una de las funciones de este paquete trabajando con las bases que importamos anteriormente.</p>
<h3 id="ordenar">Ordenar</h3>
<p>La función <code>arrange</code> permite ordenar la base de datos en base a algún valor de una o más variables. Mediante esta función vamos a ordenar las bases de los hogares y de las personas por las variables Número identificador de vivienda (nocues) y Número identificador de hogar (nhog).</p>
<pre class="r"><code># Abrimos la libreria
library(dplyr)</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.3</code></pre>
<pre class="r"><code># Ordenamos ambas bases con la funcion arrange 
hogares &lt;- hogares %&gt;% arrange(nocues, nhog)
personas &lt;- personas %&gt;% arrange(nocues, nhog)</code></pre>
<h3 id="emparejar">Emparejar</h3>
<p>Existen cuatro tipos de uniones para bases de datos en el paquete dplyr y puede encontrar más información al respecto de cada una de ellas <a href="https://dplyr.tidyverse.org/reference/join.html">aquí</a>. De estas cuatro maneras de emparejar bases, solamente nos vamos a centrar en una, es decir, en la que se realiza mediante la función <code>left_join</code>. Siendo así, respetando la cantidad de casos y de variables que tiene la base de personas, vamos a agregar las variables de la base de hogares. Esto le haremos de la siguiente manera:</p>
<pre class="r"><code># Emparejar bases
pisac &lt;- personas %&gt;% left_join(., hogares, by = c(&quot;nocues&quot;, &quot;nhog&quot;))
# el . llama al objeto que está antes del pipe</code></pre>
<p>Entonces, hemos emparejado ambas bases y además también guardamos este resultado en un nuevo dataframe que se llama pisac. De esta manera, en esta nueva base incorporamos a la base de las personas todas las variables de las base de los hogares respetando las variables que funcionan como “key” o “llave” (nocues y nhog).</p>
<h3 id="filtrar-y-seleccionar">Filtrar y seleccionar</h3>
<p>Con la función <code>filter</code> es posible filtrar la base de datos acorde al cumplimiento de condiciones lógicas y la función <code>select</code> permite especificar la serie de columnas o variables que se desea conservar o descartar de un dataframe. A continuación se presenta una tabla que resume las distintas condiciones lógicas que podemos utilizar para filtrar casos con la funcion <code>filter</code>.</p>
<p><em>Tabla 6</em></p>
<table>
<thead>
<tr class="header">
<th>Símbolo</th>
<th>Significado</th>
<th>Símbolo</th>
<th>Significado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&gt;</td>
<td>Mayor que</td>
<td>!=</td>
<td>Distinto a</td>
</tr>
<tr class="even">
<td>&lt;</td>
<td>Menor que</td>
<td>%in%</td>
<td>Dentro del grupo</td>
</tr>
<tr class="odd">
<td>==</td>
<td>Igual a</td>
<td>is.na</td>
<td>Es NA</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>Mayor o igual a</td>
<td>!is.na</td>
<td>No es NA</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>Menor o igual a</td>
<td>&amp;, <code>|</code></td>
<td>y, o</td>
</tr>
</tbody>
</table>
<p><em>Fuente: <a href="https://derek-corcoran-barrios.github.io/Libro/_book/tidydata.html#filter" class="uri">https://derek-corcoran-barrios.github.io/Libro/_book/tidydata.html#filter</a> </em></p>
<p>Entonces, a partir de esta nueva base pisac, que fue el resultado del emparejamiento de las bases personas y hogares, vamos a filtrar solamente los casos de la región del NEA y a su vez le pediremos que seleccione solamente algunas variables del total de variables que contiene el dataframe.</p>
<pre class="r"><code># Filtrar la base emparejada por la region NEA y seleccionar variables
NEA &lt;- pisac %&gt;% 
  filter(region.x == &quot;NEA (Chaco, Corrientes, Formosa y Misiones)&quot;) %&gt;% 
  select(v108, v109, v116, t_hogar, nivel_ed, v134a, 
estado, v179, nocues, nhog, f_calib3.x, region.x, aglo.x, v12, v14, v15, v16, v19, v235i, 
v237, v259a, v260a, v213bi)</code></pre>
<p>De esta manera, tendríamos creado un nuevo dataframe que se llama NEA y que contiene únicamente los casos correspondientes a la región del NEA y 23 variables que fueron seleccionadas del dataframe llamado pisac.</p>
<h3 id="renombrar">Renombrar</h3>
<p>Podemos cambiar los nombres a las variables con la función <code>rename</code>. A modo de ejemplo modifiquemos solo tres nombres de las variable v108 a Edad, v109 a Sexo y v116 a Est_civil.</p>
<pre class="r"><code># Renombrar variables
NEA &lt;- NEA %&gt;% rename(Edad = v108,
                      Sexo = v109,
                      Est_civil = v116)</code></pre>
<h3 id="resumir">Resumir</h3>
<p>La función <code>summarise</code> nos permite realizar tablas de resúmenes numéricos con la información original de una variable. Vamos a crear a modo de ejemplo una tabla que contenga algunas medidas para la variable <em>Ingreso total del hogar</em> (v235i).</p>
<pre class="r"><code># Resumen 
Resumen_igreso &lt;- NEA %&gt;% summarise(Promedio_ing = mean(v235i),
                                    Mediana = median(v235i),
                                    Varianza = var(v235i),
                                    &quot;Desvío estandar&quot; = sd(v235i))

Resumen_igreso</code></pre>
<pre><code>##   Promedio_ing Mediana Varianza Desvío estandar
## 1     9925.995    7640 60203908        7759.118</code></pre>
<h3 id="agrupar">Agrupar</h3>
<p>La función <code>group_by</code> se complementa con la función <code>summarise</code> y permite generar resúmenes numéricos para cada valor categórico de una variable cualitativa. Por ejemplo, podemos generar la misma tabla de resumen anterior pero ahora agrupando las medidas para cada valor de la variable <em>Nivel educativo</em> (nivel_ed).</p>
<pre class="r"><code># Resumen por grupo
Ingreso_x_educ &lt;- NEA %&gt;% 
  group_by(nivel_ed) %&gt;%  
  summarise(Promedio = mean(v235i),
            Mediana = median(v235i),
            Varianza = var(v235i),
            &quot;Desvio estandar&quot; = sd(v235i))

Ingreso_x_educ</code></pre>
<pre><code>## # A tibble: 11 x 5
##    nivel_ed                     Promedio Mediana  Varianza `Desvio estanda~
##    &lt;fct&gt;                           &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;
##  1 Menores de 5 años               9284.   6957     7.21e7            8492.
##  2 Sin instrucción (incluye nu~    6912.   5500     1.86e7            4310.
##  3 Primaria/EGB incompleto         8387.   6838     4.80e7            6932.
##  4 Primaria/EGB completo           7985.   6926.    2.69e7            5191.
##  5 Secundario/Polimodal incomp~    9215.   7000     4.18e7            6466.
##  6 Secundario/Polimodal comple~   11223.   9000     6.54e7            8090.
##  7 Terciario incompleto           10739.   9000     4.71e7            6866.
##  8 Terciario completo             13862.  11000     8.28e7            9098.
##  9 Universitario incompleto       13332.  11800     5.97e7            7729.
## 10 Universitario completo         20716.  18000     1.40e8           11827.
## 11 Educación especial              5249.   5700     6.38e6            2527.</code></pre>
<p>Observe que en el caso del nombre de la columna Desvío estándar, el mismo está indicado entre comillas, esto permite crear nombres de columnas que estén separados con espacio.</p>
<h3 id="transformar">Transformar</h3>
<p>Utilizando la función <code>mutate</code> podemos agregar y crear nuevas variables a partir de operaciones con la misma o entre otras variables. Veamos cómo podemos recodificar una variable numérica realizando una operación matemática para crear y agregar al dataframe NEA la varibale <em>Ingreso total del hogar per cápita</em> (ITH_PC) que será resultado del cociente entre las variables <em>Ingreso total del hogar imputado</em> (v235i) y <em>Tamaño del hogar</em> (t_hogar).</p>
<pre class="r"><code># Recodificar variable
NEA &lt;- NEA %&gt;% mutate(ITH_PC = v235i/t_hogar)

# Observamos los cinco primeros valores 
head(NEA$ITH_PC, 5)</code></pre>
<pre><code>## [1] 1273.714 1273.714 1273.714 1273.714 1273.714</code></pre>
<h3 id="caso-cuando">Caso cuando</h3>
<p>La función <code>case_when</code> permite crear una nueva variable generando los valores de la misma a partir de condiciones específicas. En caso de que no se cumpla las condiciones indicadas la variable tomará valores NA (valor faltante o valor perdido). Esta función se complementa con la función <code>mutate</code> y es útil para recategorizar valores de una variable cualitativa. Continuemos recategorizando los valores de la variable <em>Clase social de pertenencia</em> (v260a), agrupando los valores en Clase baja, Clase obrera, Clase media y Clase alta.</p>
<pre class="r"><code># Primero observamos cuales son los valores de la variable
levels(NEA$v260a)</code></pre>
<pre><code>## [1] &quot;Clase baja&quot;       &quot;Clase obrera&quot;     &quot;Clase media baja&quot;
## [4] &quot;Clase media&quot;      &quot;Clase media alta&quot; &quot;Clase alta&quot;      
## [7] &quot;NS/NR&quot;</code></pre>
<pre class="r"><code># Ahora recategorizamos los valores
NEA &lt;- NEA %&gt;% mutate(Clase_recod = 
               case_when(v260a == &quot;Clase baja&quot; ~ &quot;Clase baja&quot;,
                         v260a == &quot;Clase obrera&quot; ~ &quot;Clase obrera&quot;,
                         v260a %in% c(&quot;Clase media baja&quot;,
                                      &quot;Clase media&quot;,
                                      &quot;Clase media alta&quot;) ~ &quot;Clase media&quot;,
                         v260a == &quot;Clase alta&quot; ~ &quot;Clase alta&quot;,
                         v260a == &quot;NS/NR&quot; ~ &quot;NS/NR&quot;)) %&gt;% 
  mutate(Clase_recod = ordered(Clase_recod,               
                               levels = c(&quot;Clase baja&quot;,     # indicamos que se trata de 
                                          &quot;Clase obrera&quot;,   # una variable ordinal
                                          &quot;Clase media&quot;,    # y ordenamos los valores
                                          &quot;Clase alta&quot;,
                                          &quot;NS/NR&quot;)))
# Consultamos los valores
levels(NEA$Clase_recod)</code></pre>
<pre><code>## [1] &quot;Clase baja&quot;   &quot;Clase obrera&quot; &quot;Clase media&quot;  &quot;Clase alta&quot;  
## [5] &quot;NS/NR&quot;</code></pre>
<h2 id="valores-na-missing-values">Valores NA (missing values)</h2>
<p>En R los valores faltantes o valores perdidos se los conocen como <code>NA</code>, es común que cuando trabajemos con bases de datos nos encontremos con estos valores. Para saber si una variable contiene valores <code>NA</code> se utiliza la función is.na la cual devuelve un resultado lógico, es decir, si el objeto contiene valores perdidos el resultado será <code>TRUE</code>, de lo contrario será <code>FALSE</code>. Veamos un ejemplo con la variable <em>Condición de inactividad</em> (v179).</p>
<pre class="r"><code># Observar valores NA para los primeros 5 casos
head(is.na(NEA$v179), 5)</code></pre>
<pre><code>## [1] FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>Observe que de los cinco primeros casos, cuatro son NA. Ahora bien, en este caso ¿realmente son valores perdidos? Se debe tener en cuenta que no siempre se trata de valores perdidos como tales, ya que si observamos el formulario de encuesta del PISAC podemos notar que esta variable <em>Condición de inactividad</em> surge de una sucesión de preguntas, es decir, la condición de inactividad de la persona va a ser únicamente en el caso de que la persona se declare inactiva en la pregunta anterior. Por lo tanto, en esta variable los valores NA en realidad son valores que no corresponden y no valores perdidos. Esta aclaración es importante y se debe tener en cuenta al momento que nos encontremos con valores NA. Por otra parte, un inconveniente frecuente que suele suceder con estos valores surge cuando queremos realizar alguna medida de resumen numérica, por ejemplo el promedio. Si la variable tiene valores NA lo más probable es que el resultado sea “NA” y para resolver esto se utiliza el argumento na.rm. Observemos un ejemplo con la variable <em>Ingreso neto en ocupación principal</em> (v213bi).</p>
<pre class="r"><code># Promedio de v213bi
mean(NEA$v213bi)</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code># Omitir valores NA
mean(NEA$v213bi, na.rm = TRUE)</code></pre>
<pre><code>## [1] 1695.497</code></pre>
<p>Observe que el promedio de los ingresos de la ocupacion principal de las personas es considerablemente bajo debido a que ésta variable presenta muchos casos con ingresos de 0 pesos. Por lo tanto, para corregir este problema tendremos que filtrar los datos con solo aquellos que presenten ingresos mayores a 0. Entonces, procedemos a hacerlo de la siguiente manera:</p>
<pre class="r"><code># Creamos la tabla filtrando
Ing_ocup_ppal &lt;- pisac %&gt;% 
  filter(v213bi &gt; 0 &amp;
           !is.na(v213bi)) %&gt;%  # filtramos tambien por los casos que no son NA
  select(v213bi) # y seleccionamos solo esta variable 

# Calculamos ahora el promedio
mean(Ing_ocup_ppal$v213bi)</code></pre>
<pre><code>## [1] 6398.697</code></pre>
<p>Otra caso particular con el que podemos encontrarnos al momento de manipular datos es la necesidad de convertir uno o más valores como NA. Por ejemplo, en nuestra base NEA la variable Edad se encuentra como tipo factor (categórica) y contiene dos valores “Menor de un año” y “99 años y más” que es necesario primero convertirlos en NA para poder hacer posteriormente el cambio de factor a numérica. Veamos el ejemplo:</p>
<pre class="r"><code># Convertimos los valores en NA
NEA$Edad[NEA$Edad == &quot;Menor de un año&quot; |
         NEA$Edad == &quot;99 años y más&quot;] &lt;- NA 

# Pasamos primero de factor a character
NEA$Edad &lt;- as.character(NEA$Edad)

# Por ultimo pasamos a numérica
NEA$Edad &lt;- as.numeric(NEA$Edad)</code></pre>
<p>Ahora, es posible recodificar la variable Edad como lo hicimos anteriormente con la funcion <code>case_when</code>, creando una nueva variable con categoría de edades.</p>
<pre class="r"><code># Primero observamos los valores para definir categorías
summary(NEA$Edad)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    1.00   14.00   26.00   31.43   47.00   97.00      34</code></pre>
<pre class="r"><code># Establecemos las categorías
# Establecemos las categorías
NEA &lt;- NEA %&gt;% 
  mutate(Edad_recod = case_when(Edad %in% c(1:17)  ~ &quot;Hasta 17&quot;, 
                                Edad %in% c(18:35) ~ &quot;de 18 a 35&quot;,
                                Edad %in% c(36:97) ~ &quot;36 y más&quot;)) %&gt;% 
  mutate(Edad_recod = ordered(Edad_recod,
                              levels = c(&quot;Hasta 17&quot;, 
                                         &quot;de 18 a 35&quot;,
                                         &quot;36 y más&quot;)))
# Consultamos los valores
levels(NEA$Edad_recod)</code></pre>
<pre><code>## [1] &quot;Hasta 17&quot;   &quot;de 18 a 35&quot; &quot;36 y más&quot;</code></pre>
<h4 id="referencias">Referencias</h4>
<p>Este post está basado en los siguientes materiales:</p>
<blockquote>
<p>WICKHAM H., GROLEMUND G. “R for Data Science” (2017). Recuperado de: <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a></p>
</blockquote>
<blockquote>
<p>MENDIZABAL S. “Taller de Introducción a R” (2017). Recuperado de: <a href="https://songeo.github.io/introduccion-r-bookdown/" class="uri">https://songeo.github.io/introduccion-r-bookdown/</a></p>
</blockquote>
<blockquote>
<p>WEKSLER G., KOZLOWSKI D., SHOKIDA N., “Curso de R para procesamiento de datos de la Encuesta Permanente de Hogares” (2018). Recuperado de: <a href="https://diegokoz.github.io/Curso_R_EPH_clases/" class="uri">https://diegokoz.github.io/Curso_R_EPH_clases/</a></p>
</blockquote>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">ETIQUETADO EN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/r/">R</a>

  <a class="tag tag--primary tag--small" href="/tags/ciencias-sociales/">Ciencias Sociales</a>

  <a class="tag tag--primary tag--small" href="/tags/dplyr/">dplyr</a>

  <a class="tag tag--primary tag--small" href="/tags/datos/">Datos</a>

  <a class="tag tag--primary tag--small" href="/tags/pisac/">PISAC</a>

  <a class="tag tag--primary tag--small" href="/tags/tidyverse/">tidyverse</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/visualizacion-de-datos/" data-tooltip="Visualización de datos">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/01/nociones-b%C3%A1sicas-de-r/" data-tooltip="Nociones básicas de R">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread"></div>
<script>
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://samuelgnz.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Samuel Gonzalez. Todos los derechos reservados
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/visualizacion-de-datos/" data-tooltip="Visualización de datos">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/01/nociones-b%C3%A1sicas-de-r/" data-tooltip="Nociones básicas de R">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/01/manipulaci%C3%B3n-de-datos/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2F2019%2F01%2Fmanipulaci%25C3%25B3n-de-datos%2F">
          <i class="fa fa-facebook-official"></i><span>Compartir en Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2019%2F01%2Fmanipulaci%25C3%25B3n-de-datos%2F">
          <i class="fa fa-twitter"></i><span>Compartir en Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2F2019%2F01%2Fmanipulaci%25C3%25B3n-de-datos%2F">
          <i class="fa fa-google-plus"></i><span>Compartir en Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="/img/me.jpg" alt="Foto de autor" />
    
    <h4 id="about-card-name">Samuel Gonzalez</h4>
    
      <div id="about-card-bio">Técnico en Investigación Socioeconómica</div>
    
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Posadas, Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Buscar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no se encontraron artículos</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/03/visualizacion-de-datos/">
                <h3 class="media-heading">Visualización de datos</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">IntroducciónLuego de haber visto como manipular los datos disponibles en la base de datos del PISAC, en esta etapa del proceso del análisis de datos nos centraremos en la visualización, generando graficos de calidad utilizando el paquete ggplot2 que forma parte del conjunto de paquetes que integran el tidyverse. Conoceremos la estructura de la sintaxis de este paquete y los argumentos necesarios para obtener los graficos que deseamos.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/01/manipulaci%C3%B3n-de-datos/">
                <h3 class="media-heading">Manipulación de datos</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">IntroducciónHasta este punto hemos visto como importar bases de datos y a partir de las funciones básicas realizamos una primera exploración a las bases. Además de la primera exploración, uno de los puntos importantes luego de importar dataframes, es la manipulación de los datos que contiene el dataframe con el que estamos trabajando. Es decir, verificar si los datos han sido cargados correctamente y decidir de qué manera adecuarlo a nuestros intereses de la investigación, así como también poder realizar resúmenes con estos datos.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/01/nociones-b%C3%A1sicas-de-r/">
                <h3 class="media-heading">Nociones básicas de R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">IntroducciónEn este apunte se pretende desarrollar los recursos que ofrece el software estadístico R para el tratamiento y análisis de datos en el ámbito de las ciencias sociales. Para ello se trabajará con las bases de datos del Programa de Investigación sobre la Sociedad Argentina Contemporanea (PISAC) y se irá desarrollando las herramientas y potencialidades del software en función a estos datos. Comenzaremos en un primer momento con la instalación del software y luego pasaremos a la utilización del mismo.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no se encontraron artículos"
         data-message-one="1 artículo encontrado"
         data-message-other="{n} artículos encontrados">
         3 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2019\/01\/manipulaci%C3%B3n-de-datos\/';
          
            this.page.identifier = '\/2019\/01\/manipulaci%C3%B3n-de-datos\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'samuelgnz';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

